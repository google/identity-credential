<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>WritableIdentityCredential (identity 2023.04.20 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WritableIdentityCredential (identity 2023.04.20 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="Versionbox">
<li><a href="../../../../versions.html"><span id="version">Version 2023.04.20 â–¼</span></a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.android.identity</a></div>
<h2 title="Class WritableIdentityCredential" class="title">Class WritableIdentityCredential</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.android.identity.WritableIdentityCredential</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public abstract class <span class="typeNameLabel">WritableIdentityCredential</span>
extends java.lang.Object</pre>
<div class="block">Class used to personalize a new identity credential.

 <p>Note that the credential is not persisted until calling
 <a href="#personalize(com.android.identity.PersonalizationData)"><code>personalize(PersonalizationData)</code></a>.

 <p>Once persisted, the PII in a credential can be updated using
 <a href="IdentityCredential.html#update(com.android.identity.PersonalizationData)"><code>IdentityCredential.update(PersonalizationData)</code></a>.

 Use <a href="IdentityCredentialStore.html#createCredential(java.lang.String,java.lang.String)"><code>IdentityCredentialStore.createCredential(String, String)</code></a> to create a new credential.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>abstract java.util.Collection&lt;java.security.cert.X509Certificate&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCredentialKeyCertificateChain(byte%5B%5D)">getCredentialKeyCertificateChain</a></span>&#8203;(byte[]&nbsp;challenge)</code></th>
<td class="colLast">
<div class="block">Generates and returns an X.509 certificate chain for the CredentialKey which identifies this
 credential to the issuing authority.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#personalize(com.android.identity.PersonalizationData)">personalize</a></span>&#8203;(<a href="PersonalizationData.html" title="class in com.android.identity">PersonalizationData</a>&nbsp;personalizationData)</code></th>
<td class="colLast">
<div class="block">Stores all of the data in the credential, with the specified access control profiles.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getCredentialKeyCertificateChain(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCredentialKeyCertificateChain</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;java.util.Collection&lt;java.security.cert.X509Certificate&gt;&nbsp;getCredentialKeyCertificateChain&#8203;(@NonNull
                                                                                                          byte[]&nbsp;challenge)</pre>
<div class="block">Generates and returns an X.509 certificate chain for the CredentialKey which identifies this
 credential to the issuing authority. The certificate contains an
 <a href="https://source.android.com/security/keystore/attestation">Android Keystore</a>
 attestation extension which describes the key and the security hardware in which it lives.

 <p>The issuer <b>MUST</b> carefully examine this certificate chain including (but not
 limited to) checking that the root certificate is well-known, whether the tag
 Tag::IDENTITY_CREDENTIAL_KEY is present, the passed in challenge is present, the tag
 Tag::ATTESTATION_APPLICATION_ID is set to the expected Android application, the device
 has verified boot enabled, each certificate in the chain is signed by its successor,
 none of the certificates have been revoked, and so on.

 <p>If <a href="WritableIdentityCredential.html" title="class in com.android.identity"><code>WritableIdentityCredential</code></a> is not hardware-backed the credential is
 implemented using Android Keystore and the attestation extension will
 not contain the tag Tag::IDENTITY_CREDENTIAL_KEY. Otherwise if this tag is present
 it signals that <a href="WritableIdentityCredential.html" title="class in com.android.identity"><code>WritableIdentityCredential</code></a> is hardware-backed and CredentialKey
 and corresponding authentication keys can only sign/MAC very specific
 messages. This is in contrast to Android Keystore key which can be used to
 sign/MAC anything.

 <p>It is not strictly necessary to use this method to provision a credential if the issuing
 authority doesn't care about the nature of the security hardware. If called, however, this
 method must be called before <a href="#personalize(com.android.identity.PersonalizationData)"><code>personalize(PersonalizationData)</code></a>.

 <p>Note that the credential is not persisted until calling
 <a href="#personalize(com.android.identity.PersonalizationData)"><code>personalize(PersonalizationData)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>challenge</code> - is a non-empty byte array whose contents should be unique, fresh and
                  provided by the issuing authority. The value provided is embedded in the
                  attestation extension and enables the issuing authority to verify that the
                  attestation certificate is fresh.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the X.509 certificate for this credential's CredentialKey.</dd>
</dl>
</li>
</ul>
<a id="personalize(com.android.identity.PersonalizationData)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>personalize</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;byte[]&nbsp;personalize&#8203;(@NonNull
                                   <a href="PersonalizationData.html" title="class in com.android.identity">PersonalizationData</a>&nbsp;personalizationData)</pre>
<div class="block">Stores all of the data in the credential, with the specified access control profiles.

 <p>The credential is persisted only after this method returns successfully.

 <p>This method returns a COSE_Sign1 data structure signed by the CredentialKey with payload
 set to <code>ProofOfProvisioning</code> as defined below.

 <pre>
     ProofOfProvisioning = [
          "ProofOfProvisioning",        ; tstr
          tstr,                         ; DocType
          [ * AccessControlProfile ],
          ProvisionedData,
          bool                          ; true if this is a test credential, should
                                        ; always be false.
      ]

      AccessControlProfile = {
          "id": uint,
          ? "readerCertificate" : bstr,
          ? (
               "userAuthenticationRequired" : bool,
               "timeoutMillis" : uint,
          )
      }

      ProvisionedData = {
          * Namespace =&gt; [ + Entry ]
      },

      Namespace = tstr

      Entry = {
          "name" : tstr,
          "value" : any,
          "accessControlProfiles" : [ * uint ],
      }
 </pre>

 <p>This data structure provides a guarantee to the issuer about the data which may be
 returned in the CBOR returned by
 <a href="ResultData.html#getAuthenticatedData()"><code>ResultData.getAuthenticatedData()</code></a> during a credential
 presentation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>personalizationData</code> - The data to provision, including access control profiles
                              and data elements and their values, grouped into namespaces.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A COSE_Sign1 data structure, see above.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
