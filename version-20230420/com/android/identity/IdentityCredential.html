<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>IdentityCredential (identity 20230420 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="IdentityCredential (identity 20230420 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":38,"i1":38,"i2":10,"i3":38,"i4":10,"i5":6,"i6":6,"i7":6,"i8":6,"i9":38,"i10":10,"i11":38,"i12":42,"i13":38,"i14":10,"i15":42,"i16":38,"i17":38,"i18":38,"i19":10,"i20":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="Versionbox">
<li><a href="../../../../versions.html"><span id="version">Version 20230420 â–¼</span></a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.android.identity</a></div>
<h2 title="Class IdentityCredential" class="title">Class IdentityCredential</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.android.identity.IdentityCredential</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public abstract class <span class="typeNameLabel">IdentityCredential</span>
extends java.lang.Object</pre>
<div class="block">Class used to read data from a previously provisioned credential.

 Use <a href="IdentityCredentialStore.html#getCredentialByName(java.lang.String,int)"><code>IdentityCredentialStore.getCredentialByName(String, int)</code></a> to get a
 <a href="IdentityCredential.html" title="class in com.android.identity"><code>IdentityCredential</code></a> instance.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>abstract java.security.KeyPair</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createEphemeralKeyPair()">createEphemeralKeyPair</a></span>()</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#decryptMessageFromReader(byte%5B%5D)">decryptMessageFromReader</a></span>&#8203;(byte[]&nbsp;messageCiphertext)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Applications should use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> and
             implement encryption/decryption themselves.</div>
</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#delete(byte%5B%5D)">delete</a></span>&#8203;(byte[]&nbsp;challenge)</code></th>
<td class="colLast">
<div class="block">Deletes a credential.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>abstract byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#encryptMessageToReader(byte%5B%5D)">encryptMessageToReader</a></span>&#8203;(byte[]&nbsp;messagePlaintext)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Applications should use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> and
             implement encryption/decryption themselves.</div>
</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.List&lt;android.icu.util.Calendar&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAuthenticationDataExpirations()">getAuthenticationDataExpirations</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the expiration times of dynamic authentication keys.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>abstract int[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAuthenticationDataUsageCount()">getAuthenticationDataUsageCount</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the number of times the dynamic authentication keys have been used.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>abstract java.util.Collection&lt;java.security.cert.X509Certificate&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAuthKeysNeedingCertification()">getAuthKeysNeedingCertification</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a collection of dynamic authentication keys that need certification.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>abstract java.util.Collection&lt;java.security.cert.X509Certificate&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCredentialKeyCertificateChain()">getCredentialKeyCertificateChain</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets the X.509 certificate chain for the CredentialKey which identifies this
 credential to the issuing authority.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>abstract androidx.biometric.BiometricPrompt.CryptoObject</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCryptoObject()">getCryptoObject</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a <code>BiometricPrompt.CryptoObject</code> which can be used with this
 <a href="IdentityCredential.html" title="class in com.android.identity"><code>IdentityCredential</code></a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>abstract <a href="ResultData.html" title="class in com.android.identity">ResultData</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)">getEntries</a></span>&#8203;(byte[]&nbsp;requestMessage,
          java.util.Map&lt;java.lang.String,&#8203;java.util.Collection&lt;java.lang.String&gt;&gt;&nbsp;entriesToRequest,
          byte[]&nbsp;readerSignature)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#proveOwnership(byte%5B%5D)">proveOwnership</a></span>&#8203;(byte[]&nbsp;challenge)</code></th>
<td class="colLast">
<div class="block">Proves ownership of a credential.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAllowUsingExhaustedKeys(boolean)">setAllowUsingExhaustedKeys</a></span>&#8203;(boolean&nbsp;allowUsingExhaustedKeys)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAllowUsingExpiredKeys(boolean)">setAllowUsingExpiredKeys</a></span>&#8203;(boolean&nbsp;allowUsingExpiredKeys)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAvailableAuthenticationKeys(int,int)">setAvailableAuthenticationKeys</a></span>&#8203;(int&nbsp;keyCount,
                              int&nbsp;maxUsesPerKey)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="#setAvailableAuthenticationKeys(int,int,long)"><code>setAvailableAuthenticationKeys(int, int, long)</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAvailableAuthenticationKeys(int,int,long)">setAvailableAuthenticationKeys</a></span>&#8203;(int&nbsp;keyCount,
                              int&nbsp;maxUsesPerKey,
                              long&nbsp;minValidTimeMillis)</code></th>
<td class="colLast">
<div class="block">Sets the number of dynamic authentication keys the <code>IdentityCredential</code> will maintain,
 the number of times each should be used, and the minimum amount of time it's valid for.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setIncrementKeyUsageCount(boolean)">setIncrementKeyUsageCount</a></span>&#8203;(boolean&nbsp;incrementKeyUsageCount)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setReaderEphemeralPublicKey(java.security.PublicKey)">setReaderEphemeralPublicKey</a></span>&#8203;(java.security.PublicKey&nbsp;readerEphemeralPublicKey)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setSessionTranscript(byte%5B%5D)">setSessionTranscript</a></span>&#8203;(byte[]&nbsp;sessionTranscript)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeStaticAuthenticationData(java.security.cert.X509Certificate,byte%5B%5D)">storeStaticAuthenticationData</a></span>&#8203;(java.security.cert.X509Certificate&nbsp;authenticationKey,
                             byte[]&nbsp;staticAuthData)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="#storeStaticAuthenticationData(java.security.cert.X509Certificate,android.icu.util.Calendar,byte%5B%5D)"><code>storeStaticAuthenticationData(X509Certificate, Calendar, byte[])</code></a>
     instead.</div>
</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeStaticAuthenticationData(java.security.cert.X509Certificate,android.icu.util.Calendar,byte%5B%5D)">storeStaticAuthenticationData</a></span>&#8203;(java.security.cert.X509Certificate&nbsp;authenticationKey,
                             android.icu.util.Calendar&nbsp;expirationDate,
                             byte[]&nbsp;staticAuthData)</code></th>
<td class="colLast">
<div class="block">Store authentication data associated with a dynamic authentication key.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(com.android.identity.PersonalizationData)">update</a></span>&#8203;(<a href="PersonalizationData.html" title="class in com.android.identity">PersonalizationData</a>&nbsp;personalizationData)</code></th>
<td class="colLast">
<div class="block">Updates the credential with new access control profiles and data items.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="createEphemeralKeyPair()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createEphemeralKeyPair</h4>
<pre class="methodSignature">@Deprecated
@NonNull
public abstract&nbsp;java.security.KeyPair&nbsp;createEphemeralKeyPair()</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Create an ephemeral key pair to use to establish a secure channel with a reader.

 <p>Most applications will use only the public key, and only to send it to the reader,
 allowing the private key to be used internally for <a href="#encryptMessageToReader(byte%5B%5D)"><code>encryptMessageToReader(byte[])</code></a>
 and <a href="#decryptMessageFromReader(byte%5B%5D)"><code>decryptMessageFromReader(byte[])</code></a>. The private key is also provided for
 applications that wish to use a cipher suite that is not supported by
 <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ephemeral key pair to use to establish a secure channel with a reader.</dd>
</dl>
</li>
</ul>
<a id="setReaderEphemeralPublicKey(java.security.PublicKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReaderEphemeralPublicKey</h4>
<pre class="methodSignature">@Deprecated
public abstract&nbsp;void&nbsp;setReaderEphemeralPublicKey&#8203;(@NonNull
                                                 java.security.PublicKey&nbsp;readerEphemeralPublicKey)
                                          throws java.security.InvalidKeyException</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Set the ephemeral public key provided by the reader. This must be called before
 <a href="#encryptMessageToReader(byte%5B%5D)"><code>encryptMessageToReader(byte[])</code></a> or <a href="#decryptMessageFromReader(byte%5B%5D)"><code>decryptMessageFromReader(byte[])</code></a> can be called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>readerEphemeralPublicKey</code> - The ephemeral public key provided by the reader to
                                 establish a secure session.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.InvalidKeyException</code> - if the given key is invalid.</dd>
</dl>
</li>
</ul>
<a id="setSessionTranscript(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSessionTranscript</h4>
<pre class="methodSignature">@Deprecated
public abstract&nbsp;void&nbsp;setSessionTranscript&#8203;(@NonNull
                                          byte[]&nbsp;sessionTranscript)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Set the session transcript. This must be called before
 <a href="#encryptMessageToReader(byte%5B%5D)"><code>encryptMessageToReader(byte[])</code></a> or <a href="#decryptMessageFromReader(byte%5B%5D)"><code>decryptMessageFromReader(byte[])</code></a> can be called.

 <p>This method can only be called once per <a href="IdentityCredential.html" title="class in com.android.identity"><code>IdentityCredential</code></a> instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionTranscript</code> - the session transcript.</dd>
</dl>
</li>
</ul>
<a id="encryptMessageToReader(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encryptMessageToReader</h4>
<pre class="methodSignature">@Deprecated
@NonNull
public abstract&nbsp;byte[]&nbsp;encryptMessageToReader&#8203;(@NonNull
                                              byte[]&nbsp;messagePlaintext)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Applications should use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> and
             implement encryption/decryption themselves.</div>
</div>
<div class="block">Encrypt a message for transmission to the reader.

 <p>In order for this to work, <a href="#setSessionTranscript(byte%5B%5D)"><code>setSessionTranscript(byte[])</code></a> and
 <a href="#setReaderEphemeralPublicKey(java.security.PublicKey)"><code>setReaderEphemeralPublicKey(PublicKey)</code></a> must have already been
 called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>messagePlaintext</code> - unencrypted message to encrypt.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>encrypted message.</dd>
</dl>
</li>
</ul>
<a id="decryptMessageFromReader(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decryptMessageFromReader</h4>
<pre class="methodSignature">@Deprecated
@NonNull
public abstract&nbsp;byte[]&nbsp;decryptMessageFromReader&#8203;(@NonNull
                                                byte[]&nbsp;messageCiphertext)
                                         throws <a href="MessageDecryptionException.html" title="class in com.android.identity">MessageDecryptionException</a></pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Applications should use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> and
             implement encryption/decryption themselves.</div>
</div>
<div class="block">Decrypt a message received from the reader.

 <p>In order for this to work, <a href="#setSessionTranscript(byte%5B%5D)"><code>setSessionTranscript(byte[])</code></a> and
 <a href="#setReaderEphemeralPublicKey(java.security.PublicKey)"><code>setReaderEphemeralPublicKey(PublicKey)</code></a> must have already been
 called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>messageCiphertext</code> - encrypted message to decrypt.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>decrypted message.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="MessageDecryptionException.html" title="class in com.android.identity">MessageDecryptionException</a></code> - if the ciphertext couldn't be decrypted.</dd>
</dl>
</li>
</ul>
<a id="getCredentialKeyCertificateChain()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCredentialKeyCertificateChain</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;java.util.Collection&lt;java.security.cert.X509Certificate&gt;&nbsp;getCredentialKeyCertificateChain()</pre>
<div class="block">Gets the X.509 certificate chain for the CredentialKey which identifies this
 credential to the issuing authority. This is the same certificate chain that
 was returned by <a href="WritableIdentityCredential.html#getCredentialKeyCertificateChain(byte%5B%5D)"><code>WritableIdentityCredential.getCredentialKeyCertificateChain(byte[])</code></a>
 when the credential was first created and its Android Keystore extension will
 contain the <code>challenge</code> data set at that time. See the documentation
 for that method for important information about this certificate chain.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the certificate chain for this credential's CredentialKey.</dd>
</dl>
</li>
</ul>
<a id="setAllowUsingExhaustedKeys(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAllowUsingExhaustedKeys</h4>
<pre class="methodSignature">@Deprecated
public abstract&nbsp;void&nbsp;setAllowUsingExhaustedKeys&#8203;(boolean&nbsp;allowUsingExhaustedKeys)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Sets whether to allow using an authentication key which use count has been exceeded if no
 other key is available. This must be called prior to calling
 <a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)"><code>getEntries(byte[], Map, byte[])</code></a> or using a <code>BiometricPrompt.CryptoObject</code>
 which references this object.

 <p>By default this is set to true.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowUsingExhaustedKeys</code> - whether to allow using an authentication key which use count
                                has been exceeded if no other key is available.</dd>
</dl>
</li>
</ul>
<a id="setAllowUsingExpiredKeys(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAllowUsingExpiredKeys</h4>
<pre class="methodSignature">@Deprecated
public&nbsp;void&nbsp;setAllowUsingExpiredKeys&#8203;(boolean&nbsp;allowUsingExpiredKeys)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Sets whether to allow using an authentication key which has been expired if no
 other key is available. This must be called prior to calling
 <a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)"><code>getEntries(byte[], Map, byte[])</code></a> or using a <code>BiometricPrompt.CryptoObject</code>
 which references this object.

 <p>By default this is set to false.

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202201"><code>IdentityCredentialStore.FEATURE_VERSION_202201</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowUsingExpiredKeys</code> - whether to allow using an authentication key which use count
                              has been exceeded if no other key is available.</dd>
</dl>
</li>
</ul>
<a id="setIncrementKeyUsageCount(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIncrementKeyUsageCount</h4>
<pre class="methodSignature">@Deprecated
public&nbsp;void&nbsp;setIncrementKeyUsageCount&#8203;(boolean&nbsp;incrementKeyUsageCount)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Sets whether the usage count of an authentication key should be increased. This must be
 called prior to calling
 <a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)"><code>getEntries(byte[], Map, byte[])</code></a> or using a <code>BiometricPrompt.CryptoObject</code>
 which references this object.

 <p>By default this is set to true.

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202201"><code>IdentityCredentialStore.FEATURE_VERSION_202201</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>incrementKeyUsageCount</code> - whether the usage count of the key should be increased.</dd>
</dl>
</li>
</ul>
<a id="getCryptoObject()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCryptoObject</h4>
<pre class="methodSignature">@Nullable
public abstract&nbsp;androidx.biometric.BiometricPrompt.CryptoObject&nbsp;getCryptoObject()</pre>
<div class="block">Gets a <code>BiometricPrompt.CryptoObject</code> which can be used with this
 <a href="IdentityCredential.html" title="class in com.android.identity"><code>IdentityCredential</code></a>.

 <p>If <a href="IdentityCredential.html" title="class in com.android.identity"><code>IdentityCredential</code></a> is hardware-backed, the returned
 <code>BiometricPrompt.CryptoObject</code> is associated
 <code>IdentityCredential</code> object from the Android Framework.
 If it's not hardware-backed it's not defined which kind of object it's associated with.
 Because of this, this method is the preferred way
 to obtain a <code>BiometricPrompt.CryptoObject</code> rather than to construct it
 manually.

 <p>If the credential has no access control profiles with user-authentication and timeout 0,
 the value <code>null</code> may be returned. This just means the application won't have a
 <code>BiometricPrompt.CryptoObject</code> to pass to <code>BiometricPrompt</code> and will have to
 pass <code>null</code> instead.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <code>BiometricPrompt.CryptoObject</code> which can be used with
 <code>BiometricPrompt</code> or <code>null</code>.</dd>
</dl>
</li>
</ul>
<a id="getEntries(byte[],java.util.Map,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntries</h4>
<pre class="methodSignature">@Deprecated
@NonNull
public abstract&nbsp;<a href="ResultData.html" title="class in com.android.identity">ResultData</a>&nbsp;getEntries&#8203;(@Nullable
                                      byte[]&nbsp;requestMessage,
                                      @NonNull
                                      java.util.Map&lt;java.lang.String,&#8203;java.util.Collection&lt;java.lang.String&gt;&gt;&nbsp;entriesToRequest,
                                      @Nullable
                                      byte[]&nbsp;readerSignature)
                               throws <a href="NoAuthenticationKeyAvailableException.html" title="class in com.android.identity">NoAuthenticationKeyAvailableException</a>,
                                      <a href="InvalidReaderSignatureException.html" title="class in com.android.identity">InvalidReaderSignatureException</a>,
                                      <a href="EphemeralPublicKeyNotFoundException.html" title="class in com.android.identity">EphemeralPublicKeyNotFoundException</a>,
                                      <a href="InvalidRequestMessageException.html" title="class in com.android.identity">InvalidRequestMessageException</a></pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="PresentationSession.html" title="class in com.android.identity"><code>PresentationSession</code></a> instead.</div>
</div>
<div class="block">Retrieve data entries and associated data from this <code>IdentityCredential</code>.

 <p>If an access control check fails for one of the requested entries or if the entry
 doesn't exist, the entry is simply not returned. The application can detect this
 by using the <a href="ResultData.html#getStatus(java.lang.String,java.lang.String)"><code>ResultData.getStatus(String, String)</code></a> method on each of the requested
 entries.

 <p>It is permissible to call this method multiple times using the same instance. If this is
 done the same auth-key will be used.

 <p>The application should not make any assumptions on whether user authentication is needed.
 Instead, the application should request the data elements values first and then examine
 the returned <a href="ResultData.html" title="class in com.android.identity"><code>ResultData</code></a>. If <a href="ResultData.html#STATUS_USER_AUTHENTICATION_FAILED"><code>ResultData.STATUS_USER_AUTHENTICATION_FAILED</code></a>
 is returned the application should call <a href="#getCryptoObject()"><code>getCryptoObject()</code></a> and use the returned
 <code>BiometricPrompt.CryptoObject</code> with a
 <code>BiometricPrompt</code>. Upon successful authentication the application
 may call <a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)"><code>getEntries(byte[], Map, byte[])</code></a> again.

 <p>If not <code>null</code> the <code>requestMessage</code> parameter must contain data for the request
 from the verifier. The content can be defined in the way appropriate for the credential, but
 there are three requirements that must be met to work with this API:
 <ul>
 <li>The content must be a CBOR-encoded structure.</li>
 <li>The CBOR structure must be a map.</li>
 <li>The map must contain a tstr key "nameSpaces" whose value contains a map, as described in
     the example below.</li>
 </ul>

 <p>If these requirements are not met the <a href="InvalidRequestMessageException.html" title="class in com.android.identity"><code>InvalidRequestMessageException</code></a> exception
 is thrown.

 <p>Here's an example of CBOR which conforms to this requirement:
 <pre>
   ItemsRequest = {
     ? "docType" : DocType,
     "nameSpaces" : NameSpaces,
     ? "RequestInfo" : {* tstr =&gt; any} ; Additional info the reader wants to provide
   }

   DocType = tstr

   NameSpaces = {
     + NameSpace =&gt; DataElements    ; Requested data elements for each NameSpace
   }

   NameSpace = tstr

   DataElements = {
     + DataElement =&gt; IntentToRetain
   }

   DataElement = tstr
   IntentToRetain = bool
 </pre>

 <p>If mdoc session encryption is used (e.g. if <a href="#createEphemeralKeyPair()"><code>createEphemeralKeyPair()</code></a> has been
 called) and if <a href="#setSessionTranscript(byte%5B%5D)"><code>setSessionTranscript(byte[])</code></a> was called, the X and Y
 coordinates of the public part of the key-pair previously generated by
 <a href="#createEphemeralKeyPair()"><code>createEphemeralKeyPair()</code></a> must appear somewhere in the bytes of the CBOR. Each of
 these coordinates must appear encoded with the most significant bits first and use the
 exact amount of bits indicated by the key size of the ephemeral keys. For example, if the
 ephemeral key is using the P-256 curve then the 32 bytes for the X coordinate encoded with
 the most significant bits first must appear somewhere in the CBOR and ditto for the 32
 bytes for the Y coordinate.

 <p>If <code>readerAuth</code> is not <code>null</code> it must be the bytes of a <code>COSE_Sign1</code>
 structure as defined in RFC 8152. For the payload nil shall be used and the
 detached payload is the ReaderAuthenticationBytes CBOR described below.
 <pre>
     ReaderAuthentication = [
       "ReaderAuthentication",
       SessionTranscript,
       ItemsRequestBytes
     ]

     ItemsRequestBytes = #6.24(bstr .cbor ItemsRequest)

     ReaderAuthenticationBytes = #6.24(bstr .cbor ReaderAuthentication)
 </pre>

 <p>where <code>ItemsRequestBytes</code> are the bytes in the <code>requestMessage</code> parameter.

 <p>The public key corresponding to the key used to make the signature, can be found in the
 <code>x5chain</code> unprotected header element of the <code>COSE_Sign1</code> structure (as as
 described in
 <a href="https://tools.ietf.org/html/draft-ietf-cose-x509-04">draft-ietf-cose-x509-04</a>).
 There will be at least one certificate in said element and there may be more (and if so,
 each certificate must be signed by its successor).

 <p>Data elements protected by reader authentication are returned if, and only if, they are
 mentioned in <code>requestMessage</code>, <code>requestMessage</code> is signed by the top-most
 certificate in the reader's certificate chain, and the data element is configured
 with an <a href="AccessControlProfile.html" title="class in com.android.identity"><code>AccessControlProfile</code></a> configured with an X.509 certificate which appears
 in the certificate chain.

 <p>Note that only items referenced in <code>entriesToRequest</code> are returned - the
 <code>requestMessage</code> parameter is used only for enforcing reader authentication.

 <p>The reason for having <code>requestMessage</code> and <code>entriesToRequest</code> as separate
 parameters is that the former represents a request from the remote verifier device
 (optionally signed) and this allows the application to filter the request to not include
 data elements which the user has not consented to sharing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>requestMessage</code> - If not <code>null</code>, must contain CBOR data conforming to
                               the schema mentioned above.</dd>
<dd><code>entriesToRequest</code> - The entries to request, organized as a map of namespace
                               names with each value being a collection of data elements
                               in the given namespace.</dd>
<dd><code>readerSignature</code> - A <code>COSE_Sign1</code> structure as described above or
                               <code>null</code> if reader authentication is not being used.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <a href="ResultData.html" title="class in com.android.identity"><code>ResultData</code></a> object containing entry data organized by namespace and a
         cryptographically authenticated representation of the same data.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="NoAuthenticationKeyAvailableException.html" title="class in com.android.identity">NoAuthenticationKeyAvailableException</a></code> - is thrown if authentication keys were never
                                                provisioned, none are available, or the
                                                available ones are all exhausted and
                                                <a href="#setAllowUsingExhaustedKeys(boolean)"><code>setAllowUsingExhaustedKeys(boolean)</code></a>
                                                was called with <code>false</code>.</dd>
<dd><code><a href="InvalidReaderSignatureException.html" title="class in com.android.identity">InvalidReaderSignatureException</a></code> - if the reader signature is invalid, or it
                                                doesn't contain a certificate chain, or if
                                                the signature failed to validate.</dd>
<dd><code><a href="InvalidRequestMessageException.html" title="class in com.android.identity">InvalidRequestMessageException</a></code> - if the requestMessage is malformed.</dd>
<dd><code><a href="EphemeralPublicKeyNotFoundException.html" title="class in com.android.identity">EphemeralPublicKeyNotFoundException</a></code> - if the ephemeral public key was not found in
                                                the session transcript.</dd>
<dd><code><a href="CredentialInvalidatedException.html" title="class in com.android.identity">CredentialInvalidatedException</a></code> - if the credential has been invalidated</dd>
</dl>
</li>
</ul>
<a id="setAvailableAuthenticationKeys(int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAvailableAuthenticationKeys</h4>
<pre class="methodSignature">public abstract&nbsp;void&nbsp;setAvailableAuthenticationKeys&#8203;(int&nbsp;keyCount,
                                                    int&nbsp;maxUsesPerKey)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="#setAvailableAuthenticationKeys(int,int,long)"><code>setAvailableAuthenticationKeys(int, int, long)</code></a> instead.</div>
</div>
<div class="block">Sets the number of dynamic authentication keys the <code>IdentityCredential</code> will maintain,
 and the number of times each should be used.

 <p><code>IdentityCredential</code>s will select the least-used dynamic authentication key each
 time <a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)"><code>getEntries(byte[], Map, byte[])</code></a> is called. <code>IdentityCredential</code>s
 for which this method has not been called behave as though it had been called wit
 <code>keyCount</code> 0 and <code>maxUsesPerKey</code> 1.

 <p>The effect of this method is like calling
 <a href="#setAvailableAuthenticationKeys(int,int,long)"><code>setAvailableAuthenticationKeys(int, int, long)</code></a> with the last parameter is set to 0.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keyCount</code> - The number of active, certified dynamic authentication keys the
                      <code>IdentityCredential</code> will try to keep available. This value
                      must be non-negative.</dd>
<dd><code>maxUsesPerKey</code> - The maximum number of times each of the keys will be used before it's
                      eligible for replacement. This value must be greater than zero.</dd>
</dl>
</li>
</ul>
<a id="getAuthKeysNeedingCertification()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuthKeysNeedingCertification</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;java.util.Collection&lt;java.security.cert.X509Certificate&gt;&nbsp;getAuthKeysNeedingCertification()</pre>
<div class="block">Gets a collection of dynamic authentication keys that need certification.

 <p>When there aren't enough certified dynamic authentication keys (either because the key
 count has been increased, one or more keys have reached their usage count, or keys have
 expired), this method will generate replacement keys and certificates and return them for
 issuer certification. The issuer certificates and associated static authentication data
 must then be provided back to the <code>IdentityCredential</code> using
 <a href="#storeStaticAuthenticationData(java.security.cert.X509Certificate,android.icu.util.Calendar,byte%5B%5D)"><code>storeStaticAuthenticationData(X509Certificate, Calendar, byte[])</code></a>.

 <p>Each X.509 certificate is signed by CredentialKey. The certificate chain for CredentialKey
 can be obtained using the <a href="#getCredentialKeyCertificateChain()"><code>getCredentialKeyCertificateChain()</code></a> method.

 <p>The following non-optional fields for the X.509 certificate are set as follows:
 <ul>
  <li>version: INTEGER 2 (means v3 certificate).</li>
  <li>serialNumber: INTEGER 1 (fixed value: same on all certs).</li>
  <li>signature: must be set to ECDSA.</li>
  <li>subject: CN shall be set to "Android Identity Credential Authentication Key" (fixed
  value: same on all certs).</li>
  <li>issuer: CN shall be set to "Android Identity Credential Key" (fixed value: same on
  all certs).</li>
  <li>validity: should be from current time and one year in the future (365 days).</li>
  <li>subjectPublicKeyInfo: must contain attested public key.</li>
 </ul>

 <p>If running on a store with <a href="IdentityCredentialStore.html#FEATURE_VERSION_202101"><code>IdentityCredentialStore.FEATURE_VERSION_202101</code></a> or
 later, each X.509 certificate contains an X.509 extension at OID 1.3.6.1.4.1.11129.2.1.26
 which contains a DER encoded OCTET STRING with the bytes of the CBOR with the following
 CDDL:
 <pre>
   ProofOfBinding = [
     "ProofOfBinding",
     bstr,              // Contains SHA-256(ProofOfProvisioning)
   ]
 </pre>
 <p>This CBOR enables an issuer to determine the exact state of the credential it
 returns issuer-signed data for.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A collection of X.509 certificates for dynamic authentication keys that need issuer
 certification.</dd>
</dl>
</li>
</ul>
<a id="storeStaticAuthenticationData(java.security.cert.X509Certificate,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeStaticAuthenticationData</h4>
<pre class="methodSignature">@Deprecated
public abstract&nbsp;void&nbsp;storeStaticAuthenticationData&#8203;(@NonNull
                                                   java.security.cert.X509Certificate&nbsp;authenticationKey,
                                                   @NonNull
                                                   byte[]&nbsp;staticAuthData)
                                            throws <a href="UnknownAuthenticationKeyException.html" title="class in com.android.identity">UnknownAuthenticationKeyException</a></pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="#storeStaticAuthenticationData(java.security.cert.X509Certificate,android.icu.util.Calendar,byte%5B%5D)"><code>storeStaticAuthenticationData(X509Certificate, Calendar, byte[])</code></a>
     instead.</div>
</div>
<div class="block">Store authentication data associated with a dynamic authentication key.

 <p>This should only be called for an authenticated key returned by
 <a href="#getAuthKeysNeedingCertification()"><code>getAuthKeysNeedingCertification()</code></a>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>authenticationKey</code> - The dynamic authentication key for which certification and
                          associated static authentication data is being provided.</dd>
<dd><code>staticAuthData</code> - Static authentication data provided by the issuer that validates
                          the authenticity
                          and integrity of the credential data fields.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="UnknownAuthenticationKeyException.html" title="class in com.android.identity">UnknownAuthenticationKeyException</a></code> - If the given authentication key is not recognized.</dd>
</dl>
</li>
</ul>
<a id="storeStaticAuthenticationData(java.security.cert.X509Certificate,android.icu.util.Calendar,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeStaticAuthenticationData</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;storeStaticAuthenticationData&#8203;(@NonNull
                                          java.security.cert.X509Certificate&nbsp;authenticationKey,
                                          @NonNull
                                          android.icu.util.Calendar&nbsp;expirationDate,
                                          @NonNull
                                          byte[]&nbsp;staticAuthData)
                                   throws <a href="UnknownAuthenticationKeyException.html" title="class in com.android.identity">UnknownAuthenticationKeyException</a></pre>
<div class="block">Store authentication data associated with a dynamic authentication key.

 <p>This should only be called for an authenticated key returned by
 <a href="#getAuthKeysNeedingCertification()"><code>getAuthKeysNeedingCertification()</code></a>.</p>

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202101"><code>IdentityCredentialStore.FEATURE_VERSION_202101</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>authenticationKey</code> - The dynamic authentication key for which certification and
                          associated static authentication data is being provided.</dd>
<dd><code>expirationDate</code> - The expiration date of the static authentication data.</dd>
<dd><code>staticAuthData</code> - Static authentication data provided by the issuer that validates
                          the authenticity
                          and integrity of the credential data fields.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="UnknownAuthenticationKeyException.html" title="class in com.android.identity">UnknownAuthenticationKeyException</a></code> - If the given authentication key is not recognized.</dd>
</dl>
</li>
</ul>
<a id="getAuthenticationDataUsageCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuthenticationDataUsageCount</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;int[]&nbsp;getAuthenticationDataUsageCount()</pre>
<div class="block">Get the number of times the dynamic authentication keys have been used.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>int array of dynamic authentication key usage counts.</dd>
</dl>
</li>
</ul>
<a id="proveOwnership(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>proveOwnership</h4>
<pre class="methodSignature">@NonNull
public&nbsp;byte[]&nbsp;proveOwnership&#8203;(@NonNull
                             byte[]&nbsp;challenge)</pre>
<div class="block">Proves ownership of a credential.

 <p>This method returns a COSE_Sign1 data structure signed by the CredentialKey
 with payload set to <code>ProofOfOwnership</code> as defined below.</p>
 <pre>
     ProofOfOwnership = [
          "ProofOfOwnership",           ; tstr
          tstr,                         ; DocType
          bstr,                         ; Challenge
          bool                          ; true if this is a test credential, should
                                        ; always be false.
      ]
 </pre>

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202101"><code>IdentityCredentialStore.FEATURE_VERSION_202101</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>challenge</code> - is a non-empty byte array whose contents should be unique, fresh and
                  provided by the issuing authority. The value provided is embedded in the
                  generated CBOR and enables the issuing authority to verify that the
                  returned proof is fresh.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the COSE_Sign1 data structure above</dd>
</dl>
</li>
</ul>
<a id="delete(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre class="methodSignature">@NonNull
public&nbsp;byte[]&nbsp;delete&#8203;(@NonNull
                     byte[]&nbsp;challenge)</pre>
<div class="block">Deletes a credential.

 <p>This method returns a COSE_Sign1 data structure signed by the CredentialKey
 with payload set to <code>ProofOfDeletion</code> as defined below.</p>
 <pre>
     ProofOfDeletion = [
          "ProofOfDeletion",            ; tstr
          tstr,                         ; DocType
          bstr,                         ; Challenge
          bool                          ; true if this is a test credential, should
                                        ; always be false.
      ]
 </pre>

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202101"><code>IdentityCredentialStore.FEATURE_VERSION_202101</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>challenge</code> - is a non-empty byte array whose contents should be unique, fresh and
                  provided by the issuing authority. The value provided is embedded in the
                  generated CBOR and enables the issuing authority to verify that the
                  returned proof is fresh.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the COSE_Sign1 data structure above</dd>
</dl>
</li>
</ul>
<a id="update(com.android.identity.PersonalizationData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">@NonNull
public&nbsp;byte[]&nbsp;update&#8203;(@NonNull
                     <a href="PersonalizationData.html" title="class in com.android.identity">PersonalizationData</a>&nbsp;personalizationData)</pre>
<div class="block">Updates the credential with new access control profiles and data items.

 <p>This method is similar to
 <a href="WritableIdentityCredential.html#personalize(com.android.identity.PersonalizationData)"><code>WritableIdentityCredential.personalize(PersonalizationData)</code></a> except that it operates
 on an existing credential, see the documentation for that method for the format of the
 returned data.

 <p>If this call succeeds an side-effect is that all dynamic authentication keys for the
 credential are deleted. The application will need to use
 <a href="#getAuthKeysNeedingCertification()"><code>getAuthKeysNeedingCertification()</code></a> to generate replacement keys and return
 them for issuer certification.

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202101"><code>IdentityCredentialStore.FEATURE_VERSION_202101</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>personalizationData</code> - The data to update, including access control profiles
                              and data elements and their values, grouped into namespaces.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A COSE_Sign1 data structure, see above.</dd>
</dl>
</li>
</ul>
<a id="setAvailableAuthenticationKeys(int,int,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAvailableAuthenticationKeys</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setAvailableAuthenticationKeys&#8203;(int&nbsp;keyCount,
                                           int&nbsp;maxUsesPerKey,
                                           long&nbsp;minValidTimeMillis)</pre>
<div class="block">Sets the number of dynamic authentication keys the <code>IdentityCredential</code> will maintain,
 the number of times each should be used, and the minimum amount of time it's valid for.

 <p>The Identity Credential system will select the least-used dynamic authentication key each
 time <a href="#getEntries(byte%5B%5D,java.util.Map,byte%5B%5D)"><code>getEntries(byte[], Map, byte[])</code></a> is called. Identity Credentials
 for which this method has not been called behave as though it had been called wit
 <code>keyCount</code> 0, <code>maxUsesPerKey</code> 1, and <code>minValidTimeMillis</code> 0.

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202301"><code>IdentityCredentialStore.FEATURE_VERSION_202301</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>keyCount</code> - The number of active, certified dynamic authentication keys the
                      <code>IdentityCredential</code> will try to keep available. This value
                      must be non-negative.</dd>
<dd><code>maxUsesPerKey</code> - The maximum number of times each of the keys will be used before it's
                      eligible for replacement. This value must be greater than zero.</dd>
<dd><code>minValidTimeMillis</code> - If a key has less time left than this value it will be eliglible
                           for replacement.</dd>
</dl>
</li>
</ul>
<a id="getAuthenticationDataExpirations()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAuthenticationDataExpirations</h4>
<pre class="methodSignature">@NonNull
public&nbsp;java.util.List&lt;android.icu.util.Calendar&gt;&nbsp;getAuthenticationDataExpirations()</pre>
<div class="block">Get the expiration times of dynamic authentication keys.

 <p>The returned array may have <code>null</code> values if the key hasn't been
 certified or if it was certified without an expiration date.

 <p>This is only implemented on <a href="IdentityCredentialStore.html#FEATURE_VERSION_202301"><code>IdentityCredentialStore.FEATURE_VERSION_202301</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of authentication key expirations.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
