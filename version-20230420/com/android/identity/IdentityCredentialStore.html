<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>IdentityCredentialStore (identity 20230420 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="IdentityCredentialStore (identity 20230420 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":10,"i2":38,"i3":6,"i4":9,"i5":6,"i6":9,"i7":6,"i8":9,"i9":6,"i10":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="Versionbox">
<li><a href="../../../../versions.html"><span id="version">Version 20230420 â–¼</span></a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.android.identity</a></div>
<h2 title="Class IdentityCredentialStore" class="title">Class IdentityCredentialStore</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.android.identity.IdentityCredentialStore</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public abstract class <span class="typeNameLabel">IdentityCredentialStore</span>
extends java.lang.Object</pre>
<div class="block">An interface to a secure store for user identity documents.

 <p>This interface is deliberately fairly general and abstract.  To the extent possible,
 specification of the message formats and semantics of communication with credential
 verification devices and issuing authorities (IAs) is out of scope. It provides the
 interface with secure storage but a credential-specific Android application will be
 required to implement the presentation and verification protocols and processes
 appropriate for the specific credential type.

 <p>The user of these APIs is assumed to be familiar with the
 <a href="https://www.iso.org/standard/69084.html">ISO/IEC 18013-5:2021</a>
 standard, its glossary, and the concepts it introduces.

 <p>Multiple credentials can be created.  Each credential comprises:</p>
 <ul>
 <li>A document type, which is a string.</li>

 <li>A set of namespaces, which serve to disambiguate value names. It is recommended
 that namespaces be structured as reverse domain names so that IANA effectively serves
 as the namespace registrar.</li>

 <li>For each namespace, a set of name/value pairs, each with an associated set of
 access control profile IDs.  Names are strings and values are typed and can be any
 value supported by <a href="http://cbor.io/">CBOR</a>.</li>

 <li>A set of access control profiles, each with a profile ID and a specification
 of the conditions which satisfy the profile's requirements.</li>

 <li>An asymmetric key pair which is used to authenticate the credential to the Issuing
 Authority, called the <em>CredentialKey</em>.</li>

 <li>A set of zero or more named reader authentication public keys, which are used to
 authenticate an authorized reader to the credential.</li>

 <li>A set of named signing keys, which are used to sign collections of values and session
 transcripts.</li>
 </ul>

 <p>Implementing support for user identity documents in secure storage requires dedicated
 hardware-backed support and may not always be available. In addition to hardware-backed
 Identity Credential support (which is only available in Android 11 and later and only
 if the device has support for the <a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/identity/aidl/android/hardware/identity/IIdentityCredentialStore.aidl">Identity Credential HAL</a>),
 this Jetpack has an Android Keystore backed implementation (also known as the "keystore"
 implementation) which works on any Android device with API level 24 or later.

 <p>The Identity Credential API is designed to be able to evolve and change over time
 but still provide 100% backwards compatibility. This is complicated by the fact that
 there may be a version skew between the API used by the application and the version
 implemented in secure hardware. To solve this problem, the API provides for a way
 for the application to query for the version of the API implemented in the store
 through <a href="#getFeatureVersion()"><code>getFeatureVersion()</code></a>. Known feature versions correspond to Android
 releases and currently include <a href="#FEATURE_VERSION_202009"><code>FEATURE_VERSION_202009</code></a>, <a href="#FEATURE_VERSION_202101"><code>FEATURE_VERSION_202101</code></a>,
 and <a href="#FEATURE_VERSION_202201"><code>FEATURE_VERSION_202201</code></a>.

 <p>The keystore-based store is designed so it implements all capabilities that don't
 explicitly require hardware features so will always implement the latest feature version
 defined in this library. Each of the methods in that class will state whether it's implemented
 in the keystore-based implementation.

 <p>When provisioning a document, applications should use either
 <a href="#getHardwareInstance(android.content.Context)"><code>getHardwareInstance(Context)</code></a> or <a href="#getKeystoreInstance(android.content.Context,java.io.File)"><code>getKeystoreInstance(Context, File)</code></a>
 to obtain an <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> instance and prefer the former if it
 meets the app's feature version requirement, if any.

 <p>Apart from hardware- vs keystore-backed, two different flavors of credential stores exist -
 the <em>default</em> store and the <em>direct access</em> store. Most often credentials will
 be accessed through the default store but that requires that the Android device be powered up
 and fully functional. It is desirable to allow identity credential usage when the Android
 device's battery is too low to boot the Android operating system, so direct access to the
 secure hardware via NFC may allow data retrieval, if the secure hardware chooses to implement it.

 <p>Credentials provisioned to the direct access store should <strong>always</strong> use reader
 authentication to protect data elements. The reason for this is user authentication or user
 approval of data release is not possible when the device is off.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CIPHERSUITE_ECDHE_HKDF_ECDSA_WITH_AES_256_GCM_SHA256">CIPHERSUITE_ECDHE_HKDF_ECDSA_WITH_AES_256_GCM_SHA256</a></span></code></th>
<td class="colLast">
<div class="block">Specifies that the cipher suite that will be used to secure communications between the
 reader and the prover is using the following primitives

 
 ECKA-DH (Elliptic Curve Key Agreement Algorithm - Diffie-Hellman, see BSI TR-03111).
 HKDF-SHA-256 (see RFC 5869).
 AES-256-GCM (see NIST SP 800-38D).
 HMAC-SHA-256 (see RFC 2104).
 </div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#FEATURE_VERSION_202009">FEATURE_VERSION_202009</a></span></code></th>
<td class="colLast">
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 11.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#FEATURE_VERSION_202101">FEATURE_VERSION_202101</a></span></code></th>
<td class="colLast">
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 12.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#FEATURE_VERSION_202201">FEATURE_VERSION_202201</a></span></code></th>
<td class="colLast">
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 13.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#FEATURE_VERSION_202301">FEATURE_VERSION_202301</a></span></code></th>
<td class="colLast">
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 14.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#IMPLEMENTATION_TYPE_HARDWARE">IMPLEMENTATION_TYPE_HARDWARE</a></span></code></th>
<td class="colLast">
<div class="block">Specifies that the implementation type of the store is by using Hardware-Backed
 Identity Credential APIs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#IMPLEMENTATION_TYPE_KEYSTORE">IMPLEMENTATION_TYPE_KEYSTORE</a></span></code></th>
<td class="colLast">
<div class="block">Specifies that the implementation type of the store is by using Hardware-Backed
 Android Keystore APIs.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>abstract <a href="WritableIdentityCredential.html" title="class in com.android.identity">WritableIdentityCredential</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createCredential(java.lang.String,java.lang.String)">createCredential</a></span>&#8203;(java.lang.String&nbsp;credentialName,
                java.lang.String&nbsp;docType)</code></th>
<td class="colLast">
<div class="block">Creates a new credential.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="PresentationSession.html" title="class in com.android.identity">PresentationSession</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createPresentationSession(int)">createPresentationSession</a></span>&#8203;(int&nbsp;cipherSuite)</code></th>
<td class="colLast">
<div class="block">Creates a new presentation session.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>abstract byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteCredentialByName(java.lang.String)">deleteCredentialByName</a></span>&#8203;(java.lang.String&nbsp;credentialName)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="IdentityCredential.html#delete(byte%5B%5D)"><code>IdentityCredential.delete(byte[])</code></a> instead.</div>
</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>abstract <a href="IdentityCredential.html" title="class in com.android.identity">IdentityCredential</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCredentialByName(java.lang.String,int)">getCredentialByName</a></span>&#8203;(java.lang.String&nbsp;credentialName,
                   int&nbsp;cipherSuite)</code></th>
<td class="colLast">
<div class="block">Retrieve a named credential.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="IdentityCredentialStore.html" title="class in com.android.identity">IdentityCredentialStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDirectAccessInstance(android.content.Context)">getDirectAccessInstance</a></span>&#8203;(android.content.Context&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Gets the <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> for direct access.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>abstract int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFeatureVersion()">getFeatureVersion</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the feature version implemented by the <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="IdentityCredentialStore.html" title="class in com.android.identity">IdentityCredentialStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHardwareInstance(android.content.Context)">getHardwareInstance</a></span>&#8203;(android.content.Context&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Gets a <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> implemented via secure hardware using
 the
 <a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/identity/aidl/android/hardware/identity/IIdentityCredentialStore.aidl">Identity Credential HAL</a>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>abstract java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getImplementationType()">getImplementationType</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the type of implementation of the Identity Credential store.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static <a href="IdentityCredentialStore.html" title="class in com.android.identity">IdentityCredentialStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeystoreInstance(android.content.Context,java.io.File)">getKeystoreInstance</a></span>&#8203;(android.content.Context&nbsp;context,
                   java.io.File&nbsp;storageDirectory)</code></th>
<td class="colLast">
<div class="block">Gets a <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> implemented via
 <a href="https://developer.android.com/training/articles/keystore">Hardware-Backed Android
 Keystore</a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>abstract java.lang.String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSupportedDocTypes()">getSupportedDocTypes</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a list of supported document types.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isDirectAccessSupported(android.content.Context)">isDirectAccessSupported</a></span>&#8203;(android.content.Context&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Checks if direct-access is supported.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="FEATURE_VERSION_202009">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FEATURE_VERSION_202009</h4>
<pre>public static final&nbsp;int FEATURE_VERSION_202009</pre>
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 11.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.FEATURE_VERSION_202009">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="FEATURE_VERSION_202101">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FEATURE_VERSION_202101</h4>
<pre>public static final&nbsp;int FEATURE_VERSION_202101</pre>
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 12.

 <p>This feature version adds support for
 <a href="IdentityCredential.html#delete(byte%5B%5D)"><code>IdentityCredential.delete(byte[])</code></a>,
 <a href="IdentityCredential.html#update(com.android.identity.PersonalizationData)"><code>IdentityCredential.update(PersonalizationData)</code></a>,
 <a href="IdentityCredential.html#proveOwnership(byte%5B%5D)"><code>IdentityCredential.proveOwnership(byte[])</code></a>, and
 <a href="IdentityCredential.html#storeStaticAuthenticationData(java.security.cert.X509Certificate,android.icu.util.Calendar,byte%5B%5D)"><code>IdentityCredential.storeStaticAuthenticationData(X509Certificate, Calendar, byte[])</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.FEATURE_VERSION_202101">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="FEATURE_VERSION_202201">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FEATURE_VERSION_202201</h4>
<pre>public static final&nbsp;int FEATURE_VERSION_202201</pre>
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 13.

 <p>This feature version adds support for
 <a href="#createPresentationSession(int)"><code>createPresentationSession(int)</code></a> and
 <a href="IdentityCredential.html#setIncrementKeyUsageCount(boolean)"><code>IdentityCredential.setIncrementKeyUsageCount(boolean)</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.FEATURE_VERSION_202201">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="FEATURE_VERSION_202301">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FEATURE_VERSION_202301</h4>
<pre>public static final&nbsp;int FEATURE_VERSION_202301</pre>
<div class="block">The feature version corresponding to features included in the Identity Credential API
 shipped in Android 14.

 <p>This feature version adds support for
 <a href="IdentityCredential.html#setAvailableAuthenticationKeys(int,int,long)"><code>IdentityCredential.setAvailableAuthenticationKeys(int, int, long)</code></a> and
 <a href="IdentityCredential.html#getAuthenticationDataExpirations()"><code>IdentityCredential.getAuthenticationDataExpirations()</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.FEATURE_VERSION_202301">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="CIPHERSUITE_ECDHE_HKDF_ECDSA_WITH_AES_256_GCM_SHA256">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CIPHERSUITE_ECDHE_HKDF_ECDSA_WITH_AES_256_GCM_SHA256</h4>
<pre>public static final&nbsp;int CIPHERSUITE_ECDHE_HKDF_ECDSA_WITH_AES_256_GCM_SHA256</pre>
<div class="block">Specifies that the cipher suite that will be used to secure communications between the
 reader and the prover is using the following primitives

 <ul>
 <li>ECKA-DH (Elliptic Curve Key Agreement Algorithm - Diffie-Hellman, see BSI TR-03111).</li>
 <li>HKDF-SHA-256 (see RFC 5869).</li>
 <li>AES-256-GCM (see NIST SP 800-38D).</li>
 <li>HMAC-SHA-256 (see RFC 2104).</li>
 </ul>

 <p>The exact way these primitives are combined to derive the session key
 is specified in section 9.2.1.4 of ISO/IEC 18013-5 (see description of cipher
 suite '1').</p>

 <p>At present this is the only supported cipher suite.</p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.CIPHERSUITE_ECDHE_HKDF_ECDSA_WITH_AES_256_GCM_SHA256">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="IMPLEMENTATION_TYPE_HARDWARE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IMPLEMENTATION_TYPE_HARDWARE</h4>
<pre>public static final&nbsp;java.lang.String IMPLEMENTATION_TYPE_HARDWARE</pre>
<div class="block">Specifies that the implementation type of the store is by using Hardware-Backed
 Identity Credential APIs.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.IMPLEMENTATION_TYPE_HARDWARE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="IMPLEMENTATION_TYPE_KEYSTORE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IMPLEMENTATION_TYPE_KEYSTORE</h4>
<pre>public static final&nbsp;java.lang.String IMPLEMENTATION_TYPE_KEYSTORE</pre>
<div class="block">Specifies that the implementation type of the store is by using Hardware-Backed
 Android Keystore APIs.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.android.identity.IdentityCredentialStore.IMPLEMENTATION_TYPE_KEYSTORE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getDirectAccessInstance(android.content.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDirectAccessInstance</h4>
<pre class="methodSignature">@NonNull
public static&nbsp;<a href="IdentityCredentialStore.html" title="class in com.android.identity">IdentityCredentialStore</a>&nbsp;getDirectAccessInstance&#8203;(@NonNull
                                                              android.content.Context&nbsp;context)</pre>
<div class="block">Gets the <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> for direct access.

 This should only be called if <a href="#isDirectAccessSupported(android.content.Context)"><code>isDirectAccessSupported(Context)</code></a> returns <code>true</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the application context.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> or <code>null</code> if direct access is not
     supported on this device.</dd>
</dl>
</li>
</ul>
<a id="isDirectAccessSupported(android.content.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDirectAccessSupported</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isDirectAccessSupported&#8203;(@NonNull
                                              android.content.Context&nbsp;context)</pre>
<div class="block">Checks if direct-access is supported.

 <p>Direct access requires specialized NFC hardware and may not be supported on all
 devices even if default store is available.</p>

 <p>Because Android is not running when direct-access credentials are presented, there is
 no way for the user to consent to release of credential data. Therefore, credentials
 provisioned to the direct access store should <strong>always</strong> use reader
 authentication to protect data elements such that only readers authorized by the issuer
 can access them. The
 <a href="AccessControlProfile.Builder.html#setReaderCertificate(java.security.cert.X509Certificate)"><code>AccessControlProfile.Builder.setReaderCertificate(X509Certificate)</code></a>
 method can be used at provisioning time to set which reader (or group of readers) are
 authorized to access data elements.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the application context.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if direct-access is supported.</dd>
</dl>
</li>
</ul>
<a id="getFeatureVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFeatureVersion</h4>
<pre class="methodSignature">public abstract&nbsp;int&nbsp;getFeatureVersion()</pre>
<div class="block">Returns the feature version implemented by the <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a>.

 <p>Note that this may return a feature version which is newer from the version
 of the library used.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the feature version.</dd>
</dl>
</li>
</ul>
<a id="getImplementationType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getImplementationType</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;java.lang.String&nbsp;getImplementationType()</pre>
<div class="block">Returns the type of implementation of the Identity Credential store.

 Known backing types are <a href="#IMPLEMENTATION_TYPE_HARDWARE"><code>IMPLEMENTATION_TYPE_HARDWARE</code></a> (corresponding to what
 <a href="#getHardwareInstance(android.content.Context)"><code>getHardwareInstance(Context)</code></a> returns) and <a href="#IMPLEMENTATION_TYPE_KEYSTORE"><code>IMPLEMENTATION_TYPE_KEYSTORE</code></a>
 (corresponding to what <a href="#getKeystoreInstance(android.content.Context,java.io.File)"><code>getKeystoreInstance(Context, File)</code></a> returns).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the type of implementation of the store, either <a href="#IMPLEMENTATION_TYPE_HARDWARE"><code>IMPLEMENTATION_TYPE_HARDWARE</code></a>
   or <a href="#IMPLEMENTATION_TYPE_KEYSTORE"><code>IMPLEMENTATION_TYPE_KEYSTORE</code></a>.</dd>
</dl>
</li>
</ul>
<a id="getSupportedDocTypes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSupportedDocTypes</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;java.lang.String[]&nbsp;getSupportedDocTypes()</pre>
<div class="block">Gets a list of supported document types.

 <p>Only the direct-access store may restrict the kind of document types that can be used for
 credentials. The default store always supports any document type.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The supported document types or the empty array if any document type is supported.</dd>
</dl>
</li>
</ul>
<a id="createCredential(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createCredential</h4>
<pre class="methodSignature">@NonNull
public abstract&nbsp;<a href="WritableIdentityCredential.html" title="class in com.android.identity">WritableIdentityCredential</a>&nbsp;createCredential&#8203;(@NonNull
                                                            java.lang.String&nbsp;credentialName,
                                                            @NonNull
                                                            java.lang.String&nbsp;docType)
                                                     throws <a href="AlreadyPersonalizedException.html" title="class in com.android.identity">AlreadyPersonalizedException</a>,
                                                            <a href="DocTypeNotSupportedException.html" title="class in com.android.identity">DocTypeNotSupportedException</a></pre>
<div class="block">Creates a new credential.

 <p>Note that the credential is not persisted until calling
 <a href="WritableIdentityCredential.html#personalize(com.android.identity.PersonalizationData)"><code>WritableIdentityCredential.personalize(PersonalizationData)</code></a> on the returned
 <a href="WritableIdentityCredential.html" title="class in com.android.identity"><code>WritableIdentityCredential</code></a> object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>credentialName</code> - The name used to identify the credential.</dd>
<dd><code>docType</code> - The document type for the credential.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <a href="WritableIdentityCredential.html" title="class in com.android.identity"><code>WritableIdentityCredential</code></a> that can be used to create a new credential.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="AlreadyPersonalizedException.html" title="class in com.android.identity">AlreadyPersonalizedException</a></code> - if a credential with the given name already exists.</dd>
<dd><code><a href="DocTypeNotSupportedException.html" title="class in com.android.identity">DocTypeNotSupportedException</a></code> - if the given document type isn't supported by the store.</dd>
</dl>
</li>
</ul>
<a id="getCredentialByName(java.lang.String,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCredentialByName</h4>
<pre class="methodSignature">@Nullable
public abstract&nbsp;<a href="IdentityCredential.html" title="class in com.android.identity">IdentityCredential</a>&nbsp;getCredentialByName&#8203;(@NonNull
                                                       java.lang.String&nbsp;credentialName,
                                                       int&nbsp;cipherSuite)
                                                throws <a href="CipherSuiteNotSupportedException.html" title="class in com.android.identity">CipherSuiteNotSupportedException</a></pre>
<div class="block">Retrieve a named credential.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>credentialName</code> - the name of the credential to retrieve.</dd>
<dd><code>cipherSuite</code> - the cipher suite to use for communicating with the verifier.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The named credential, or null if not found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="CipherSuiteNotSupportedException.html" title="class in com.android.identity">CipherSuiteNotSupportedException</a></code> - if cipher suite is not supported.</dd>
</dl>
</li>
</ul>
<a id="deleteCredentialByName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteCredentialByName</h4>
<pre class="methodSignature">@Deprecated
@Nullable
public abstract&nbsp;byte[]&nbsp;deleteCredentialByName&#8203;(@NonNull
                                              java.lang.String&nbsp;credentialName)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">Use <a href="IdentityCredential.html#delete(byte%5B%5D)"><code>IdentityCredential.delete(byte[])</code></a> instead.</div>
</div>
<div class="block">Delete a named credential.

 <p>This method returns a COSE_Sign1 data structure signed by the CredentialKey
 with payload set to <code>ProofOfDeletion</code> as defined below:

 <pre>
     ProofOfDeletion = [
          "ProofOfDeletion",            ; tstr
          tstr,                         ; DocType
          bool                          ; true if this is a test credential, should
                                        ; always be false.
      ]
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>credentialName</code> - the name of the credential to delete.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>null</code> if the credential was not found, the COSE_Sign1 data structure above
     if the credential was found and deleted.</dd>
</dl>
</li>
</ul>
<a id="getKeystoreInstance(android.content.Context,java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeystoreInstance</h4>
<pre class="methodSignature">@NonNull
public static&nbsp;<a href="IdentityCredentialStore.html" title="class in com.android.identity">IdentityCredentialStore</a>&nbsp;getKeystoreInstance&#8203;(@NonNull
                                                          android.content.Context&nbsp;context,
                                                          @NonNull
                                                          java.io.File&nbsp;storageDirectory)</pre>
<div class="block">Gets a <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> implemented via
 <a href="https://developer.android.com/training/articles/keystore">Hardware-Backed Android
 Keystore</a>. This is also known as the <em>keystore</em> implementation.

 This implementation guarantees that <em>CredentialKey</em> and all <em>AuthKeys</em>
 are stored in the Secure Hardware used to back Android Keystore. Additionally, if
 <a href="https://developer.android.com/training/articles/keystore#HardwareSecurityModule">StrongBox</a>
 is available it will be used for these kinds of keys.

 <p>Additionally, with this implementation credential data is stored in the directory
 specified by the <code>storageDirectory</code> parameter. The file names and contents of
 these files are private to this library and the data stored on disk is encrypted using a
 hardware-backed symmetric key.

 <p>The application should choose a path that is not subject to
 <a href="https://developer.android.com/guide/topics/data/autobackup">Backup &amp; Restore</a>,
 for example
 <code><a href="https://developer.android.com/reference/android/content/Context#getNoBackupFilesDir()">getNoBackupFilesDir()</a></code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - The context.</dd>
<dd><code>storageDirectory</code> - The path where to storage credential data, see above.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an implementation of <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> implemented on top
 of Hardware-Backed Android Keystore.</dd>
</dl>
</li>
</ul>
<a id="getHardwareInstance(android.content.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHardwareInstance</h4>
<pre class="methodSignature">@Nullable
public static&nbsp;<a href="IdentityCredentialStore.html" title="class in com.android.identity">IdentityCredentialStore</a>&nbsp;getHardwareInstance&#8203;(@NonNull
                                                          android.content.Context&nbsp;context)</pre>
<div class="block">Gets a <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> implemented via secure hardware using
 the
 <a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/identity/aidl/android/hardware/identity/IIdentityCredentialStore.aidl">Identity Credential HAL</a>.

 <p>This only works on devices running Android 11 or later and only if the device has
 support for the Identity Credential HAL.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - The context.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an implementation of <a href="IdentityCredentialStore.html" title="class in com.android.identity"><code>IdentityCredentialStore</code></a> implemented in
 secure hardware or <code>null</code> if the device doesn't support the Android Identity
 Credential HAL.</dd>
</dl>
</li>
</ul>
<a id="createPresentationSession(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createPresentationSession</h4>
<pre class="methodSignature">@NonNull
public&nbsp;<a href="PresentationSession.html" title="class in com.android.identity">PresentationSession</a>&nbsp;createPresentationSession&#8203;(int&nbsp;cipherSuite)
                                              throws <a href="CipherSuiteNotSupportedException.html" title="class in com.android.identity">CipherSuiteNotSupportedException</a></pre>
<div class="block">Creates a new presentation session.

 <p>This method gets an object to be used for interaction with a remote verifier for
 presentation of one or more credentials.

 <p>This is only implemented on <a href="#FEATURE_VERSION_202201"><code>FEATURE_VERSION_202201</code></a>, fails
 with <code>UnsupportedOperationException</code> if using a store with a lesser version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cipherSuite</code> - the cipher suite to use for communicating with the verifier.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The presentation session.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="CipherSuiteNotSupportedException.html" title="class in com.android.identity">CipherSuiteNotSupportedException</a></code> - if the cipher suite is not supported.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
